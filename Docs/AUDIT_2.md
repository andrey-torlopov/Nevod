# –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞—É–¥–∏—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Nevod

**–î–∞—Ç–∞:** 2025-11-17  
**–í–µ—Ä—Å–∏—è:** 0.0.4  
**–¶–µ–ª—å:** –û—Ü–µ–Ω–∏—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è 99% –∑–∞–¥–∞—á, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ç—å—é –∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | 9/10 | –û—Ç–ª–∏—á–Ω–∞—è, –ø—Ä–æ–¥—É–º–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ |
| –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ | 9/10 | –ß–∏—Å—Ç—ã–π, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Swift 6.2 |
| –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | 8.5/10 | –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –Ω–æ –µ—Å—Ç—å –ø—Ä–æ–±–µ–ª—ã |
| API –∏ —É–¥–æ–±—Å—Ç–≤–æ | 7/10 | –•–æ—Ä–æ—à–æ, –Ω–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–±—É—á–µ–Ω–∏–µ–º |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 8/10 | –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è, –Ω–æ –Ω–µ–ø–æ–ª–Ω–∞—è |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 8/10 | –•–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ |
| **–ü–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞** | **6/10** | –°—Ä–µ–¥–Ω–∏–π-–≤—ã—Å–æ–∫–∏–π (—Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–æ–Ω—Ü–µ–ø—Ü–∏–π) |
| **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ 99% –∑–∞–¥–∞—á** | **75%** | –•–æ—Ä–æ—à–∞—è –æ—Å–Ω–æ–≤–∞, –Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã |

---

## üéØ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–∏–∑–∞–π–Ω (9/10)

**–ß—Ç–æ —Ö–æ—Ä–æ—à–æ:**

- **Actor-based concurrency** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Swift concurrency, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç thread-safety
- **Protocol-oriented design** - –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ (`Route`, `RequestInterceptor`, `TokenModel`)
- **Separation of Concerns** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **Generics** - —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–∞–º–∏ —á–µ—Ä–µ–∑ `TokenStorage<Token>`
- **Result-oriented approach** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ `Result<T, NetworkError>`

**–ü—Ä–∏–º–µ—Ä—ã –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞:**

```swift
// NetworkProvider.swift:36-51 - –û—Ç–ª–∏—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ä–∞–∑—É–º–Ω—ã–º–∏ –¥–µ—Ñ–æ–ª—Ç–∞–º–∏
public init(
    config: NetworkConfig,
    session: URLSessionProtocol = URLSessionType.shared,
    interceptor: (any RequestInterceptor)? = nil,
    rateLimiter: (any RateLimiting)? = nil,
    logger: Letopis? = Letopis(interceptors: [ConsoleInterceptor()])
)

// Route.swift:89-103 - –≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π pipeline —á–µ—Ä–µ–∑ Result
func makeRequest(with config: NetworkConfig) -> Result<URLRequest, NetworkError> {
    return config.environment(for: domain)
        .flatMap { env in
            buildURL(base: env.baseURL, endpoint: endpoint, extraQuery: urlQueryItems)
                .map { ($0, env) }
        }
        .flatMap { (url, env) -> Result<URLRequest, NetworkError> in
            // Building request...
        }
}
```

### 2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (8.5/10)

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –æ—Ç–ª–∏—á–Ω–æ:**

- **4 –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ç–∏–ø–∞ —Ç–æ–∫–µ–Ω–æ–≤:** Bearer, Cookie, API Key (header), API Key (query)
- **Generic token system** - –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —Ç–∏–ø —Ç–æ–∫–µ–Ω–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π refresh** - –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è concurrent –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- **–ì–∏–±–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - `shouldAuthenticate` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å auth —Ç–æ–ª—å–∫–æ –∫ –Ω—É–∂–Ω—ã–º –∑–∞–ø—Ä–æ—Å–∞–º
- **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è** - —Ç–æ–∫–µ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω—è—Ç—Å—è —á–µ—Ä–µ–∑ actor-based `TokenStorage`

**–ü—Ä–∏–º–µ—Ä –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

```swift
// AuthenticationInterceptor.swift:88-111 - –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è refresh –∑–∞–ø—Ä–æ—Å–æ–≤
private func refreshTokenIfNeeded() async throws -> Token {
    if let task = refreshTask {
        return try await task.value  // Reuse existing refresh
    }
    
    let task = Task { 
        let currentToken = await tokenStorage.load()
        let newToken = try await refreshStrategy(currentToken)
        await tokenStorage.save(newToken)
        return newToken
    }
    
    self.refreshTask = task
    // Cleanup after completion
}
```

### 3. –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä–æ–≤ (9/10)

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- **–ë–∞–∑–æ–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª** `RequestInterceptor` —Å `adapt()` –∏ `retry()`
- **–¶–µ–ø–æ—á–∫–∞ –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä–æ–≤** `InterceptorChain` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
- **5 –≥–æ—Ç–æ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä–æ–≤:**
  - `AuthenticationInterceptor<Token>` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–ª—è –ª—é–±—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
  - `CookieAuthenticationInterceptor` - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è —Å–µ—Å—Å–∏–π
  - `HeadersInterceptor` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
  - `LoggingInterceptor` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Letopis
  - `InterceptorChain` - –∫–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä–æ–≤

**–û—Ç–ª–∏—á–Ω–∞—è –¥–µ—Ç–∞–ª—å:**

```swift
// InterceptorChain.swift:28-37 - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ retry
public func retry(...) async throws -> Bool {
    // Try retry in reverse order (last interceptor gets first chance)
    // This allows auth interceptors (typically last) to handle 401 first
    for interceptor in interceptors.reversed() {
        if try await interceptor.retry(request, response: response, error: error) {
            return true
        }
    }
    return false
}
```

### 4. –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (9/10)

**–°–∏–ª—å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

- **Swift 6.2** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Swift, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **Strict Concurrency** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å actor isolation
- **Comprehensive comments** - –∫–æ–¥ —Ö–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- **Type safety** - –º–∏–Ω–∏–º—É–º `Any`, –º–∞–∫—Å–∏–º—É–º generic types
- **Error handling** - –ø—Ä–æ–¥—É–º–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—à–∏–±–æ–∫
- **Security** - –∑–∞—â–∏—Ç–∞ –æ—Ç directory traversal (Route.swift:127-139)

**–ü—Ä–∏–º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

```swift
// Route.swift:127-139 - –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal
private func sanitizeEndpoint(_ endpoint: String) -> Result<String, NetworkError> {
    if trimmed.contains("://") || trimmed.hasPrefix("//") {
        return .failure(.invalidURL)
    }
    
    if normalized.range(of: #"(^|/)(\.{1,2})(/|$)"#, options: .regularExpression) != nil {
        return .failure(.invalidURL)  // Blocks "../secret" attacks
    }
    
    if normalized.contains("\\") {
        return .failure(.invalidURL)
    }
}
```

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (8/10)

**–ß—Ç–æ –ø–æ–∫—Ä—ã—Ç–æ:**

- ‚úÖ Basic requests (success, parsing errors, timeouts)
- ‚úÖ Token refresh and retry logic
- ‚úÖ Retry on timeout/transient errors
- ‚úÖ Interceptor chain
- ‚úÖ Multiple authentication methods
- ‚úÖ Cookie token encoding/decoding with HttpOnly flag
- ‚úÖ Rate limiting
- ‚úÖ Delegate forwarding
- ‚úÖ Security (directory traversal rejection)
- ‚úÖ Convenience routes (SimpleGetRoute, SimplePostRoute, etc.)

**–•–æ—Ä–æ—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö:**

```swift
// NevodTests.swift:122-160 - –û—Ç–ª–∏—á–Ω—ã–π —Ç–µ—Å—Ç refresh logic
@Test func tokenRefreshAndRetry() async {
    // First call returns 401 with old token
    // Second call succeeds with refreshed token
    // Verifies token was saved
    // Checks retry count
}
```

### 6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **Rate Limiting** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π rate limiter —Å sliding window
- **Multiple domains** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö API –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ
- **Logging** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Letopis –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **Custom URLSession** - –º–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- **Delegate support** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ URLSessionTaskDelegate –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

---

## ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### üî¥ 1. –ö–†–ò–¢–ò–ß–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö JSON body (9/10 –≤–∞–∂–Ω–æ—Å—Ç–∏)

**–ü—Ä–æ–±–ª–µ–º–∞:**

```swift
// SimpleRoutes.swift - –¢–û–õ–¨–ö–û [String: String]
public struct SimplePostRoute<R: Decodable, D: ServiceDomain>: Route {
    public let parameters: [String: String]?  // ‚ùå –¢–æ–ª—å–∫–æ –ø–ª–æ—Å–∫–∏–µ —Å–ª–æ–≤–∞—Ä–∏
}

// Route.swift:45-47 - –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—Ç—å Encodable
var bodyData: Data? {
    guard let params = parameters, !params.isEmpty else { return nil }
    // ‚ùå –¢–æ–ª—å–∫–æ JSONSerialization –¥–ª—è [String: String]
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:**

99% —Ä–µ–∞–ª—å–Ω—ã—Ö API —Ç—Ä–µ–±—É—é—Ç —Å–ª–æ–∂–Ω—ã–µ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

```json
{
  "user": {
    "name": "John",
    "email": "john@test.com",
    "profile": {
      "age": 30,
      "interests": ["coding", "music"]
    }
  },
  "settings": {
    "notifications": true
  }
}
```

**–¢–µ–∫—É—â–∏–π workaround:** –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å custom Route –¥–ª—è –ö–ê–ñ–î–û–ì–û –∑–∞–ø—Ä–æ—Å–∞ —Å JSON body.

**–í–ª–∏—è–Ω–∏–µ:** –£–±–∏–≤–∞–µ—Ç "99% –∑–∞–¥–∞—á" - –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ REST API –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã.

**–†–µ—à–µ–Ω–∏–µ:**

```swift
// 1. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è body
public protocol RouteWithBody: Route {
    associatedtype Body: Encodable
    var body: Body? { get }
}

// 2. –°–æ–∑–¥–∞—Ç—å EncodablePostRoute
public struct EncodablePostRoute<Body: Encodable, R: Decodable, D: ServiceDomain>: RouteWithBody {
    public let endpoint: String
    public let domain: D
    public let body: Body?
    
    public var method: HTTPMethod { .post }
    public var bodyData: Data? {
        guard let body = body else { return nil }
        return try? JSONEncoder().encode(body)
    }
}

// 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
struct CreateUserRequest: Encodable {
    let user: User
    let settings: Settings
}

let route = EncodablePostRoute<CreateUserRequest, UserResponse, MyDomain>(
    endpoint: "/users",
    domain: .api,
    body: CreateUserRequest(user: user, settings: settings)
)
```

---

### üî¥ 2. –ö–†–ò–¢–ò–ß–ù–û: –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ multipart/form-data (8/10 –≤–∞–∂–Ω–æ—Å—Ç–∏)

**–ü—Ä–æ–±–ª–µ–º–∞:**

–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ - –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö –∑–∞–¥–∞—á –≤ –º–æ–±–∏–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**

```swift
// –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–ª—è:
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/–∞–≤–∞—Ç–∞—Ä–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- –°–º–µ—à–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (JSON + files)
```

**–í–ª–∏—è–Ω–∏–µ:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è custom Route —Å boundary –∏ encoding.

**–†–µ—à–µ–Ω–∏–µ:**

```swift
// 1. –î–æ–±–∞–≤–∏—Ç—å FormData —Å—Ç—Ä—É–∫—Ç—É—Ä—É
public struct FormDataPart {
    let name: String
    let filename: String?
    let data: Data
    let mimeType: String
}

// 2. –î–æ–±–∞–≤–∏—Ç—å multipart encoding –≤ Route
public extension Route {
    func makeMultipartBody(parts: [FormDataPart]) -> Data {
        let boundary = UUID().uuidString
        var body = Data()
        
        for part in parts {
            body.append("--\(boundary)\r\n".data(using: .utf8)!)
            body.append("Content-Disposition: form-data; name=\"\(part.name)\"".data(using: .utf8)!)
            
            if let filename = part.filename {
                body.append("; filename=\"\(filename)\"".data(using: .utf8)!)
            }
            
            body.append("\r\n".data(using: .utf8)!)
            body.append("Content-Type: \(part.mimeType)\r\n\r\n".data(using: .utf8)!)
            body.append(part.data)
            body.append("\r\n".data(using: .utf8)!)
        }
        
        body.append("--\(boundary)--\r\n".data(using: .utf8)!)
        return body
    }
}

// 3. –°–æ–∑–¥–∞—Ç—å MultipartRoute
public struct MultipartPostRoute<R: Decodable, D: ServiceDomain>: Route {
    public let endpoint: String
    public let domain: D
    public let parts: [FormDataPart]
    
    public var method: HTTPMethod { .post }
    public var headers: [String: String]? {
        ["Content-Type": "multipart/form-data; boundary=\(boundary)"]
    }
}
```

---

### üü° 3. –í–ê–ñ–ù–û: –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ query parameters –≤ GET –∑–∞–ø—Ä–æ—Å–∞—Ö (7/10 –≤–∞–∂–Ω–æ—Å—Ç–∏)

**–ü—Ä–æ–±–ª–µ–º–∞:**

```swift
// –•–æ—á—É —Å–¥–µ–ª–∞—Ç—å: GET /users?page=1&limit=10&sort=name
let route = SimpleGetRoute<[User], MyDomain>(
    endpoint: "/users",
    domain: .api
    // ‚ùå –ù–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–ª—è query parameters
)

// –¢–µ–∫—É—â–∏–π workaround:
let route = SimpleGetRoute<[User], MyDomain>(
    endpoint: "/users?page=1&limit=10&sort=name",  // ü§Æ –£–∂–∞—Å–Ω–æ
    domain: .api
)
```

**–ü—Ä–æ–±–ª–µ–º—ã:**

1. –ù–µ–ª—å–∑—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
2. –ù–µ—Ç URL encoding –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π
3. –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ endpoint - –ø–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**

```swift
// SimpleRoutes.swift - –î–æ–±–∞–≤–∏—Ç—å query parameters
public struct SimpleGetRoute<R: Decodable, D: ServiceDomain>: Route {
    public let endpoint: String
    public let domain: D
    public let queryParameters: [String: String]?  // ‚úÖ –î–æ–±–∞–≤–∏—Ç—å
    
    public var parameters: [String: String]? { queryParameters }
    public var parameterEncoding: ParameterEncoding { .query }  // ‚úÖ –Ø–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
let route = SimpleGetRoute<[User], MyDomain>(
    endpoint: "/users",
    domain: .api,
    queryParameters: ["page": "1", "limit": "10", "sort": "name"]
)
```

---

### üü° 4. –í–ê–ñ–ù–û: –ü—É—Ç–∞–Ω–∏—Ü–∞ —Å parameters –∏ encoding (7/10 –≤–∞–∂–Ω–æ—Å—Ç–∏)

**–ü—Ä–æ–±–ª–µ–º–∞:**

```swift
// Route.swift:24-27
public extension Route {
    var parameterEncoding: ParameterEncoding {
        // ‚ùå –ù–µ—è–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ HTTP –º–µ—Ç–æ–¥–∞
        method == .get ? .query : .json
    }
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**

1. **–ù–µ–æ—á–µ–≤–∏–¥–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** - —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –∑–Ω–∞–µ—Ç, –∫—É–¥–∞ –ø–æ–ø–∞–¥—É—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
2. **–ù–µ–ª—å–∑—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å** –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, POST —Å query params)
3. **–ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç REST –ø—Ä–∞–∫—Ç–∏–∫–∞–º** - –∏–Ω–æ–≥–¥–∞ POST/PUT –Ω—É–∂–Ω—ã query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã + JSON body

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è:**

```swift
// –•–æ—á—É: POST /users?notify=true —Å JSON body
// –ù–æ parameters –∏–¥—É—Ç —Ç–æ–ª—å–∫–æ –≤ body, –∞ query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω—É–∂–Ω–æ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å –≤ endpoint
let route = SimplePostRoute<User, MyDomain>(
    endpoint: "/users?notify=true",  // ü§Æ –ü–ª–æ—Ö–æ
    domain: .api,
    parameters: ["name": "John"]  // –ò–¥–µ—Ç –≤ body
)
```

**–†–µ—à–µ–Ω–∏–µ:**

```swift
// 1. –†–∞–∑–¥–µ–ª–∏—Ç—å query –∏ body –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
public protocol Route {
    var queryParameters: [String: String]? { get }
    var bodyParameters: [String: String]? { get }
}

// 2. –ò–ª–∏ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å encoding
public struct ConfigurablePostRoute<R: Decodable, D: ServiceDomain>: Route {
    public let endpoint: String
    public let domain: D
    public let queryParams: [String: String]?
    public let bodyParams: [String: String]?
    
    public var parameterEncoding: ParameterEncoding { .json }
}
```

---

### üü° 5. –í–ê–ñ–ù–û: –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (6/10 –≤–∞–∂–Ω–æ—Å—Ç–∏)

**–ü—Ä–æ–±–ª–µ–º–∞:**

–ü–∞–≥–∏–Ω–∞—Ü–∏—è - –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö –∑–∞–¥–∞—á, –Ω–æ –Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö helpers.

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**

```swift
// –•–æ—á—É —Å–¥–µ–ª–∞—Ç—å:
let paginator = Paginator<User, MyDomain>(
    endpoint: "/users",
    domain: .api,
    pageSize: 20
)

for await users in paginator {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
}

// –ò–ª–∏:
let page1 = try await paginator.loadNext()  // GET /users?page=1&limit=20
let page2 = try await paginator.loadNext()  // GET /users?page=2&limit=20
```

**–†–µ—à–µ–Ω–∏–µ:**

```swift
// –î–æ–±–∞–≤–∏—Ç—å Paginator
public actor Paginator<Item: Decodable, Domain: ServiceDomain> {
    public struct Page: Decodable {
        let items: [Item]
        let hasMore: Bool
        let nextPage: Int?
    }
    
    private let provider: NetworkProvider
    private let endpoint: String
    private let domain: Domain
    private var currentPage = 0
    
    public func loadNext() async throws -> [Item] {
        currentPage += 1
        let route = SimpleGetRoute<Page, Domain>(
            endpoint: endpoint,
            domain: domain,
            queryParameters: ["page": "\(currentPage)", "limit": "\(pageSize)"]
        )
        let page = try await provider.perform(route)
        return page.items
    }
}
```

---

### üü° 6. NetworkError –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç response body (6/10 –≤–∞–∂–Ω–æ—Å—Ç–∏)

**–ü—Ä–æ–±–ª–µ–º–∞:**

```swift
// NetworkError.swift - –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ–ª—É –æ—Ç–≤–µ—Ç–∞
public enum NetworkError: Error {
    case clientError(Int)  // ‚ùå –¢–æ–ª—å–∫–æ –∫–æ–¥, –Ω–µ—Ç body
    case serverError(Int)  // ‚ùå –¢–æ–ª—å–∫–æ –∫–æ–¥, –Ω–µ—Ç body
}
```

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:**

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ API –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ JSON:

```json
{
  "error": "validation_failed",
  "message": "Email is already taken",
  "fields": {
    "email": "This email is already registered"
  }
}
```

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**

```swift
catch let error as NetworkError {
    switch error {
    case .clientError(let code):
        // ‚ùå –ó–Ω–∞—é —Ç–æ–ª—å–∫–æ –∫–æ–¥ 400, –Ω–æ –Ω–µ –∑–Ω–∞—é –ü–û–ß–ï–ú–£
        print("Error \(code)")  // "Error 400" - –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    }
}
```

**–†–µ—à–µ–Ω–∏–µ:**

```swift
// 1. –†–∞—Å—à–∏—Ä–∏—Ç—å NetworkError
public enum NetworkError: Error {
    case clientError(code: Int, data: Data?, response: HTTPURLResponse?)
    case serverError(code: Int, data: Data?, response: HTTPURLResponse?)
    
    // Convenience
    public var responseBody: Data? {
        switch self {
        case .clientError(_, let data, _), .serverError(_, let data, _):
            return data
        default:
            return nil
        }
    }
    
    public func decode<T: Decodable>(_ type: T.Type) throws -> T {
        guard let data = responseBody else {
            throw NetworkError.invalidResponse
        }
        return try JSONDecoder().decode(type, from: data)
    }
}

// 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
catch let error as NetworkError {
    if let apiError = try? error.decode(APIError.self) {
        print("Error: \(apiError.message)")  // ‚úÖ "Email is already taken"
    }
}
```

---

### üü° 7. –ù–µ—Ç retry —Å exponential backoff (6/10 –≤–∞–∂–Ω–æ—Å—Ç–∏)

**–ü—Ä–æ–±–ª–µ–º–∞:**

```swift
// NetworkProvider.swift:57-60 - –ü—Ä–æ—Å—Ç–æ–π retry
for attempt in 0..<attempts {
    // ‚ùå Retry —Å—Ä–∞–∑—É, –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏
    // ‚ùå –ù–µ—Ç exponential backoff
    // ‚ùå –ù–µ—Ç jitter
}
```

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:**

- –ü—Ä–∏ rate limiting –Ω—É–∂–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É retry
- Exponential backoff - best practice –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ë–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫ –º–æ–∂–Ω–æ —É—Ö—É–¥—à–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é (thundering herd)

**–†–µ—à–µ–Ω–∏–µ:**

```swift
// 1. –î–æ–±–∞–≤–∏—Ç—å RetryPolicy –≤ NetworkConfig
public struct RetryPolicy {
    let maxAttempts: Int
    let baseDelay: TimeInterval
    let maxDelay: TimeInterval
    let multiplier: Double
    let jitter: Bool
    
    func delay(for attempt: Int) -> TimeInterval {
        let exponentialDelay = min(baseDelay * pow(multiplier, Double(attempt)), maxDelay)
        guard jitter else { return exponentialDelay }
        return exponentialDelay * Double.random(in: 0.5...1.5)
    }
}

// 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ retry loop
for attempt in 0..<policy.maxAttempts {
    // ... attempt request ...
    if shouldRetry {
        let delay = policy.delay(for: attempt)
        try await Task.sleep(nanoseconds: UInt64(delay * 1_000_000_000))
        continue
    }
}
```

---

### üü¢ 8. –ú–µ–ª–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 8.1. –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ PATCH –º–µ—Ç–æ–¥–∞ —Å JSON Patch

```swift
// HTTPMethod.swift - PATCH –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ JSON Patch —Ñ–æ—Ä–º–∞—Ç–∞
case patch  // ‚úÖ –ú–µ—Ç–æ–¥ –µ—Å—Ç—å

// ‚ùå –ù–æ –Ω–µ—Ç SimplePatchRoute –∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ JSON Patch –æ–ø–µ—Ä–∞—Ü–∏–π:
// [
//   { "op": "replace", "path": "/email", "value": "new@email.com" },
//   { "op": "add", "path": "/tags/-", "value": "premium" }
// ]
```

#### 8.2. KeyValueStorage —Ç—Ä–µ–±—É–µ—Ç nonisolated, —á—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é

```swift
// KeyValueStorage.swift:12-21
public protocol KeyValueStorage: Sendable {
    nonisolated func string(for key: StorageKey) -> String?  // ‚ùå –°–ª–æ–∂–Ω–æ –¥–ª—è actor-based —Ö—Ä–∞–Ω–∏–ª–∏—â
    nonisolated func set(_ value: String?, for key: StorageKey)
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Å–¥–µ–ª–∞—Ç—å actor-based —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –Ω—É–∂–Ω—ã locks –∏–ª–∏ @unchecked Sendable.

#### 8.3. SimpleEnvironment —Å–ª–∏—à–∫–æ–º –ø—Ä–æ—Å—Ç–æ–π

```swift
// SimpleEnvironment.swift - –¢–æ–ª—å–∫–æ baseURL
public struct SimpleEnvironment: NetworkEnvironmentProviding {
    public let baseURL: URL  // ‚ùå –ù–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å default headers, timeout, –∏ —Ç.–¥.
}
```

#### 8.4. –ù–µ—Ç built-in –ø–æ–¥–¥–µ—Ä–∂–∫–∏ request cancellation

```swift
// –ù–µ—Ç —Å–ø–æ—Å–æ–±–∞ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å
let task = provider.request(route)  // ‚ùå –ù–µ–ª—å–∑—è task.cancel()
```

**–†–µ—à–µ–Ω–∏–µ:**

```swift
public func request<R: Route>(
    _ route: R,
    delegate: URLSessionTaskDelegate? = nil
) async -> (Result<R.Response, NetworkError>, task: Task<Void, Never>) {
    // Return cancellable task
}
```

#### 8.5. LoggingInterceptor –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

```swift
// LoggingInterceptor.swift:30-32
public func retry(...) async throws -> Bool {
    logError(request: request, response: response, error: error)
    return false  // ‚ùå –õ–æ–≥–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏, –Ω–µ —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
}
```

#### 8.6. –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ response headers –≤ Route

```swift
// –ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å headers –∏–∑ –æ—Ç–≤–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, rate limit info)
// ‚ùå Response type - —Ç–æ–ª—å–∫–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç, –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ headers

// –•–æ—á—É:
struct RouteWithHeaders<R: Decodable, D: ServiceDomain>: Route {
    typealias Response = (data: R, headers: [String: String])
}
```

---

## üìö –ü—Ä–æ–±–ª–µ–º—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### 1. –ù–µ—Ç –ø—Ä–∏–º–µ—Ä–æ–≤ —Ä–µ–∞–ª—å–Ω—ã—Ö use cases

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**

- ‚ùå –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞
- ‚ùå –ö–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚ùå –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å batch requests
- ‚ùå –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å WebSocket (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
- ‚ùå –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å 429 Too Many Requests
- ‚ùå –ö–∞–∫ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã
- ‚ùå –ö–∞–∫ –¥–µ–ª–∞—Ç—å conditional requests (If-Modified-Since, ETag)

### 2. –ù–µ—Ç migration guide –æ—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

**–ë—ã–ª–æ –±—ã –ø–æ–ª–µ–∑–Ω–æ:**

- –ú–∏–≥—Ä–∞—Ü–∏—è —Å Alamofire
- –ú–∏–≥—Ä–∞—Ü–∏—è —Å Moya
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å URLSession
- –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Nevod vs native URLSession

### 3. –ü—Ä–∏–º–µ—Ä—ã KeychainStorage –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–µ–ø–æ–ª–Ω—ã–µ

```swift
// Authentication.md:119-143 - –ü—Ä–∏–º–µ—Ä Keychain
final class KeychainStorage: KeyValueStorage {
    // ‚ùå –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑:
    // - Error handling
    // - Access control (kSecAttrAccessible)
    // - Synchronization (kSecAttrSynchronizable)
    // - –ë–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–π –∑–∞—â–∏—Ç—ã
}
```

---

## üéì –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä–æ–≥–∞ –≤—Ö–æ–¥–∞

### –†–µ–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞: **6/10** (—Å—Ä–µ–¥–Ω–µ-–≤—ã—Å–æ–∫–∏–π)

#### –ß—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Nevod:

1. **Swift Concurrency** (async/await, actors) - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
2. **Protocol-oriented programming** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
3. **Generics** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–∫–µ–Ω–∞–º–∏
4. **Result type** - –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ
5. **Pattern Interceptor** - –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ
6. **OAuth 2.0 / JWT** - –¥–ª—è auth –º–æ–¥—É–ª—è
7. **HTTP basics** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

#### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏:

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –ü–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|-------------|-------------|
| URLSession | 3/10 | –ü—Ä–æ—Å—Ç–æ–π, –Ω–æ verbose |
| Alamofire | 4/10 | –ü—Ä–æ—Å—Ç–æ–π API, –º–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–æ–≤ |
| **Nevod** | **6/10** | –¢—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è concurrency –∏ protocols |
| Moya | 7/10 | –°–ª–æ–∂–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, –º–Ω–æ–≥–æ boilerplate |

#### –ü—Ä–æ–±–ª–µ–º—ã –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤:

**1. –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫—É–¥–∞ –ø–æ–ø–∞–¥–∞—é—Ç parameters:**

```swift
// –ù–æ–≤–∏—á–æ–∫ –ø–∏—à–µ—Ç:
let route = SimplePostRoute<User, MyDomain>(
    endpoint: "/users",
    domain: .api,
    parameters: ["email": "test@test.com"]
)

// –í–æ–ø—Ä–æ—Å: parameters –≤ body –∏–ª–∏ –≤ query? ‚ùì
// –û—Ç–≤–µ—Ç: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç HTTP –º–µ—Ç–æ–¥–∞ (–Ω–µ–æ—á–µ–≤–∏–¥–Ω–æ!)
```

**2. –ú–Ω–æ–≥–æ boilerplate –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á:**

```swift
// –ü—Ä–æ—Å—Ç–æ —Ö–æ—á—É GET /users
// –ù—É–∂–Ω–æ:
1. –°–æ–∑–¥–∞—Ç—å enum MyDomain: ServiceDomain
2. –°–æ–∑–¥–∞—Ç—å NetworkConfig
3. –°–æ–∑–¥–∞—Ç—å NetworkProvider
4. –°–æ–∑–¥–∞—Ç—å SimpleGetRoute<[User], MyDomain>
5. –í—ã–∑–≤–∞—Ç—å provider.perform(route)

// –í Alamofire:
AF.request("https://api.example.com/users").responseDecodable(of: [User].self) { response in
    // Done
}
```

**3. –ù–µ—Ç –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á:**

```swift
// –•–æ—á—É –ø—Ä–æ—Å—Ç–æ:
let users = try await Nevod.get("https://api.example.com/users", as: [User].self)

// –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ 5 —à–∞–≥–æ–≤ –≤—ã—à–µ
```

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–Ω–∏–∂–µ–Ω–∏—é –ø–æ—Ä–æ–≥–∞ –≤—Ö–æ–¥–∞:

**1. –î–æ–±–∞–≤–∏—Ç—å "Quick Mode" –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:**

```swift
// –ù–æ–≤—ã–π –ø—Ä–æ—Å—Ç–æ–π API –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö
public struct Nevod {
    public static func get<T: Decodable>(
        _ url: String,
        as type: T.Type,
        headers: [String: String]? = nil
    ) async throws -> T {
        // –í–Ω—É—Ç—Ä–∏ —Å–æ–∑–¥–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π provider
    }
    
    public static func post<Body: Encodable, Response: Decodable>(
        _ url: String,
        body: Body,
        as type: Response.Type
    ) async throws -> Response {
        // ...
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
let users = try await Nevod.get("https://api.example.com/users", as: [User].self)
```

**2. –î–æ–±–∞–≤–∏—Ç—å DefaultDomain:**

```swift
// –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤ —Å –æ–¥–Ω–∏–º API
public enum DefaultDomain: ServiceDomain {
    case `default`
    var identifier: String { "default" }
}

// Provider with default domain
let provider = NetworkProvider.simple(baseURL: "https://api.example.com")

// SimpleRoute without domain
let route = SimpleGetRoute<User>(endpoint: "/users")  // Domain = DefaultDomain.default
```

**3. –£–ª—É—á—à–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö:**

```swift
// –¢–µ–∫—É—â–µ–µ:
case .parsingError  // ‚ùå –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞—Å–ø–∞—Ä—Å–∏–ª–æ—Å—å

// –õ—É—á—à–µ:
case .parsingError(data: Data, underlyingError: Error)  // ‚úÖ –° –¥–µ—Ç–∞–ª—è–º–∏
```

---

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ "99% –∑–∞–¥–∞—á"

### –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ: **~75%**

#### ‚úÖ –ß—Ç–æ –ø–æ–∫—Ä—ã—Ç–æ (75%):

1. ‚úÖ GET/POST/PUT/DELETE/PATCH –∑–∞–ø—Ä–æ—Å—ã
2. ‚úÖ Bearer Token authentication
3. ‚úÖ Cookie-based authentication
4. ‚úÖ API Key authentication (header & query)
5. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π token refresh
6. ‚úÖ Retry –Ω–∞ —Ç–∞–π–º–∞—É—Ç—ã
7. ‚úÖ Custom headers
8. ‚úÖ Multiple domains
9. ‚úÖ Rate limiting
10. ‚úÖ Logging
11. ‚úÖ Request/Response interception
12. ‚úÖ Type-safe routes
13. ‚úÖ Actor-based concurrency
14. ‚úÖ Progress tracking (—á–µ—Ä–µ–∑ delegate)
15. ‚úÖ –ü–ª–æ—Å–∫–∏–µ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ([String: String])

#### ‚ùå –ß—Ç–æ –ù–ï –ø–æ–∫—Ä—ã—Ç–æ (25%):

1. ‚ùå **–°–ª–æ–∂–Ω—ã–µ JSON body** (–≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã) - –ö–†–ò–¢–ò–ß–ù–û
2. ‚ùå **Multipart/form-data** (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤) - –ö–†–ò–¢–ò–ß–ù–û
3. ‚ùå **GraphQL** –∑–∞–ø—Ä–æ—Å—ã
4. ‚ùå **WebSocket** —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
5. ‚ùå **Server-Sent Events (SSE)**
6. ‚ùå **Response body –≤ –æ—à–∏–±–∫–∞—Ö**
7. ‚ùå **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** (–Ω–µ—Ç helpers)
8. ‚ùå **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –æ—Ç–≤–µ—Ç–æ–≤
9. ‚ùå **Conditional requests** (ETag, If-Modified-Since)
10. ‚ùå **Request cancellation**
11. ‚ùå **Batch requests**
12. ‚ùå **Response headers** –≤ Route
13. ‚ùå **JSON Patch** (RFC 6902)
14. ‚ùå **Query parameters –≤ SimpleGetRoute**
15. ‚ùå **Exponential backoff retry**
16. ‚ùå **Certificate pinning**
17. ‚ùå **Custom URLSessionConfiguration**
18. ‚ùå **Background downloads**
19. ‚ùå **Response validation** (custom validators)
20. ‚ùå **Request mocking/stubbing** –¥–ª—è —Ç–µ—Å—Ç–æ–≤

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–¥–µ–ª–∞–Ω–æ ASAP)

#### 1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Encodable body (–≤–ª–∏—è–Ω–∏–µ: üî¥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ)

```swift
public protocol EncodableRoute: Route {
    associatedtype Body: Encodable
    var body: Body? { get }
}

public struct EncodablePostRoute<Body: Encodable, Response: Decodable, Domain: ServiceDomain>: EncodableRoute {
    public let endpoint: String
    public let domain: Domain
    public let body: Body?
    public var method: HTTPMethod { .post }
}

// –¢–∞–∫–∂–µ –¥–ª—è PUT, PATCH
public struct EncodablePutRoute<Body: Encodable, Response: Decodable, Domain: ServiceDomain>: EncodableRoute { ... }
public struct EncodablePatchRoute<Body: Encodable, Response: Decodable, Domain: ServiceDomain>: EncodableRoute { ... }
```

#### 2. –î–æ–±–∞–≤–∏—Ç—å multipart/form-data (–≤–ª–∏—è–Ω–∏–µ: üî¥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ)

```swift
public struct FormDataPart {
    public let name: String
    public let filename: String?
    public let data: Data
    public let mimeType: String
    
    public init(name: String, data: Data, mimeType: String = "application/octet-stream") {
        self.name = name
        self.filename = nil
        self.data = data
        self.mimeType = mimeType
    }
    
    public init(name: String, filename: String, data: Data, mimeType: String) {
        self.name = name
        self.filename = filename
        self.data = data
        self.mimeType = mimeType
    }
}

public struct MultipartPostRoute<Response: Decodable, Domain: ServiceDomain>: Route {
    public let endpoint: String
    public let domain: Domain
    public let parts: [FormDataPart]
    public let textFields: [String: String]?
    
    // Implementation with boundary generation and encoding
}
```

#### 3. –†–∞—Å—à–∏—Ä–∏—Ç—å NetworkError (–≤–ª–∏—è–Ω–∏–µ: üü° –≤—ã—Å–æ–∫–æ–µ)

```swift
public enum NetworkError: Error {
    case invalidURL
    case parsingError(data: Data, underlyingError: Error)  // ‚úÖ –° –¥–µ—Ç–∞–ª—è–º–∏
    case timeout
    case noConnection
    case unauthorized(data: Data?, response: HTTPURLResponse?)  // ‚úÖ –° response
    case clientError(code: Int, data: Data?, response: HTTPURLResponse?)  // ‚úÖ –° body
    case serverError(code: Int, data: Data?, response: HTTPURLResponse?)  // ‚úÖ –° body
    case bodyEncodingFailed
    case unknown(Error)
    case authenticationFailed
    case invalidResponse(data: Data?, response: HTTPURLResponse?)  // ‚úÖ –° –¥–µ—Ç–∞–ª—è–º–∏
    
    // Convenience methods
    public var responseData: Data? { ... }
    public var httpResponse: HTTPURLResponse? { ... }
    public func decode<T: Decodable>(_ type: T.Type, using decoder: JSONDecoder = JSONDecoder()) throws -> T
}
```

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≤–∞–∂–Ω–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞)

#### 4. –î–æ–±–∞–≤–∏—Ç—å query parameters –≤ SimpleRoutes

```swift
public struct SimpleGetRoute<R: Decodable, D: ServiceDomain>: Route {
    public let endpoint: String
    public let domain: D
    public let queryParameters: [String: String]?
    
    public init(
        endpoint: String,
        domain: D,
        queryParameters: [String: String]? = nil
    ) {
        self.endpoint = endpoint
        self.domain = domain
        self.queryParameters = queryParameters
    }
    
    public var parameters: [String: String]? { queryParameters }
    public var parameterEncoding: ParameterEncoding { .query }
}
```

#### 5. –î–æ–±–∞–≤–∏—Ç—å "Quick Mode" –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á

```swift
// Nevod+Quick.swift
public extension NetworkProvider {
    static func quick(baseURL: URL) -> NetworkProvider {
        let config = NetworkConfig(
            environments: [DefaultDomain.default: SimpleEnvironment(baseURL: baseURL)]
        )
        return NetworkProvider(config: config)
    }
    
    func get<T: Decodable>(
        _ endpoint: String,
        query: [String: String]? = nil,
        as type: T.Type
    ) async throws -> T {
        let route = SimpleGetRoute<T, DefaultDomain>(
            endpoint: endpoint,
            domain: .default,
            queryParameters: query
        )
        return try await perform(route)
    }
    
    func post<Body: Encodable, Response: Decodable>(
        _ endpoint: String,
        body: Body,
        as type: Response.Type
    ) async throws -> Response {
        let route = EncodablePostRoute<Body, Response, DefaultDomain>(
            endpoint: endpoint,
            domain: .default,
            body: body
        )
        return try await perform(route)
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
let provider = NetworkProvider.quick(baseURL: URL(string: "https://api.example.com")!)
let users = try await provider.get("/users", query: ["page": "1"], as: [User].self)
```

#### 6. –î–æ–±–∞–≤–∏—Ç—å Paginator helper

```swift
public actor Paginator<Item: Decodable, Domain: ServiceDomain> {
    public enum Style {
        case offset(pageSize: Int)  // ?offset=20&limit=20
        case pageNumber(pageSize: Int)  // ?page=2&limit=20
        case cursor(nextKey: String)  // ?cursor=abc123
    }
    
    public struct Response: Decodable {
        public let items: [Item]
        public let hasMore: Bool
        public let nextCursor: String?
        public let total: Int?
    }
    
    private let provider: NetworkProvider
    private let endpoint: String
    private let domain: Domain
    private let style: Style
    private var currentOffset = 0
    private var currentPage = 1
    private var currentCursor: String?
    
    public init(
        provider: NetworkProvider,
        endpoint: String,
        domain: Domain,
        style: Style = .pageNumber(pageSize: 20)
    ) {
        self.provider = provider
        self.endpoint = endpoint
        self.domain = domain
        self.style = style
    }
    
    public func loadNext() async throws -> [Item] {
        let query = buildQueryParams()
        let route = SimpleGetRoute<Response, Domain>(
            endpoint: endpoint,
            domain: domain,
            queryParameters: query
        )
        let response = try await provider.perform(route)
        updateState(response: response)
        return response.items
    }
    
    public func reset() {
        currentOffset = 0
        currentPage = 1
        currentCursor = nil
    }
    
    private func buildQueryParams() -> [String: String] {
        switch style {
        case .offset(let pageSize):
            return ["offset": "\(currentOffset)", "limit": "\(pageSize)"]
        case .pageNumber(let pageSize):
            return ["page": "\(currentPage)", "limit": "\(pageSize)"]
        case .cursor(let nextKey):
            guard let cursor = currentCursor else { return [:] }
            return [nextKey: cursor]
        }
    }
    
    private func updateState(response: Response) {
        switch style {
        case .offset(let pageSize):
            currentOffset += pageSize
        case .pageNumber:
            currentPage += 1
        case .cursor:
            currentCursor = response.nextCursor
        }
    }
}
```

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (nice to have)

#### 7. Exponential backoff retry policy

```swift
public struct RetryPolicy: Sendable {
    public let maxAttempts: Int
    public let baseDelay: TimeInterval
    public let maxDelay: TimeInterval
    public let multiplier: Double
    public let jitter: Bool
    
    public static let `default` = RetryPolicy(
        maxAttempts: 3,
        baseDelay: 1.0,
        maxDelay: 60.0,
        multiplier: 2.0,
        jitter: true
    )
    
    public func delay(for attempt: Int) -> TimeInterval {
        let exponentialDelay = min(baseDelay * pow(multiplier, Double(attempt)), maxDelay)
        guard jitter else { return exponentialDelay }
        let jitterRange = 0.5...1.5
        return exponentialDelay * Double.random(in: jitterRange)
    }
}

// –í NetworkConfig:
public struct NetworkConfig {
    public let retryPolicy: RetryPolicy?
    // ...
}
```

#### 8. Request cancellation support

```swift
public actor NetworkProvider {
    public func request<R: Route>(
        _ route: R,
        delegate: URLSessionTaskDelegate? = nil
    ) async -> (result: Result<R.Response, NetworkError>, cancel: () -> Void) {
        let task = Task { ... }
        return (result: await task.value, cancel: { task.cancel() })
    }
}
```

#### 9. Response validation

```swift
public protocol ResponseValidator: Sendable {
    func validate(data: Data, response: HTTPURLResponse) throws
}

public struct StatusCodeValidator: ResponseValidator {
    let acceptableStatusCodes: Range<Int>
    
    public static let `default` = StatusCodeValidator(acceptableStatusCodes: 200..<300)
    
    public func validate(data: Data, response: HTTPURLResponse) throws {
        guard acceptableStatusCodes.contains(response.statusCode) else {
            throw NetworkError.clientError(
                code: response.statusCode,
                data: data,
                response: response
            )
        }
    }
}

// –í Route:
public protocol Route {
    var validators: [ResponseValidator] { get }
}
```

#### 10. LoggingInterceptor —É–ª—É—á—à–µ–Ω–∏—è

```swift
public actor LoggingInterceptor: RequestInterceptor {
    public enum Level {
        case none
        case minimal  // –¢–æ–ª—å–∫–æ URL –∏ —Å—Ç–∞—Ç—É—Å
        case headers  // + headers
        case verbose  // + body
    }
    
    private let level: Level
    
    public func adapt(_ request: URLRequest) async throws -> URLRequest {
        if level != .none {
            logRequest(request, level: level)
        }
        return request
    }
    
    // –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
    func logSuccess(request: URLRequest, response: HTTPURLResponse, data: Data) {
        // Log successful responses too
    }
}
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏

### Nevod vs Alamofire

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Nevod | Alamofire | –ü–æ–±–µ–¥–∏—Ç–µ–ª—å |
|----------|-------|-----------|-----------|
| Swift Concurrency | ‚úÖ Native async/await | ‚úÖ Async/await + Combine | Nevod |
| –ü—Ä–æ—Å—Ç–æ—Ç–∞ API | 6/10 | 8/10 | Alamofire |
| Type Safety | 9/10 | 7/10 | Nevod |
| Multipart upload | ‚ùå | ‚úÖ | Alamofire |
| Authentication | ‚úÖ Generic | ‚úÖ Built-in | Tie |
| Interceptors | ‚úÖ Clean | ‚úÖ Adapters | Nevod |
| File Download | ‚ùå Limited | ‚úÖ Advanced | Alamofire |
| Community | ‚ùå New | ‚úÖ Huge | Alamofire |
| Dependencies | ‚úÖ 1 (Letopis) | ‚úÖ 0 | Alamofire |
| Actor isolation | ‚úÖ Yes | ‚ùå No | Nevod |
| Learning curve | 6/10 | 4/10 | Alamofire |

### Nevod vs Moya

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Nevod | Moya | –ü–æ–±–µ–¥–∏—Ç–µ–ª—å |
|----------|-------|------|-----------|
| Abstraction level | Medium | High | Nevod (–ø—Ä–æ—â–µ) |
| Boilerplate | Medium | High | Nevod |
| Swift Concurrency | ‚úÖ Native | ‚ö†Ô∏è Via plugin | Nevod |
| Type Safety | 9/10 | 9/10 | Tie |
| Testing | 8/10 | 9/10 | Moya |
| Plugin system | Limited | Advanced | Moya |
| Flexibility | 8/10 | 7/10 | Nevod |

### Nevod vs URLSession

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Nevod | URLSession | –ü–æ–±–µ–¥–∏—Ç–µ–ª—å |
|----------|-------|------------|-----------|
| –ü—Ä–æ—Å—Ç–æ—Ç–∞ | 6/10 | 3/10 | Nevod |
| Type Safety | 9/10 | 2/10 | Nevod |
| Authentication | ‚úÖ Built-in | ‚ùå Manual | Nevod |
| Interceptors | ‚úÖ Yes | ‚ùå No | Nevod |
| Retry logic | ‚úÖ Built-in | ‚ùå Manual | Nevod |
| File operations | Limited | ‚úÖ Full | URLSession |
| Dependencies | 1 | 0 | URLSession |
| Performance | Good | Excellent | URLSession |

---

## üé¨ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

1. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - actor-based, Swift 6.2, concurrency
2. **–û—Ç–ª–∏—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–æ–∫–µ–Ω–æ–≤** - generic, type-safe, –ø–æ–∫—Ä—ã–≤–∞–µ—Ç 4 —Ç–∏–ø–∞ auth
3. **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–¥** - —á–∏—Å—Ç—ã–π, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π, —Ö–æ—Ä–æ—à–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
4. **–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä–æ–≤** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω, —É–¥–æ–±–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è
5. **Rate limiting** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π, –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
6. **Logging** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Letopis

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

1. **–ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö JSON body** - —É–±–∏–≤–∞–µ—Ç "99% –∑–∞–¥–∞—á"
2. **–ù–µ—Ç multipart/form-data** - –Ω–µ–ª—å–∑—è –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã
3. **–í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞** - —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞–Ω–∏—è concurrency, protocols, generics
4. **–ú–Ω–æ–≥–æ boilerplate** –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á
5. **NetworkError –±–µ–∑ response body** - —Å–ª–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ API

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ "99% –∑–∞–¥–∞—á": **75%**

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –±–∞–∑–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, –Ω–æ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã** (—Å–ª–æ–∂–Ω—ã–π JSON, multipart) –¥–µ–ª–∞—é—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –º–Ω–æ–≥–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** –•–æ—Ä–æ—à–∞—è –æ—Å–Ω–æ–≤–∞, –Ω–æ –ù–ï –≥–æ—Ç–æ–≤–∞ –∫ production –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è "99%":**

1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å `EncodablePostRoute/PutRoute/PatchRoute` (–∫—Ä–∏—Ç–∏—á–Ω–æ)
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å `MultipartRoute` (–∫—Ä–∏—Ç–∏—á–Ω–æ)
3. ‚úÖ –†–∞—Å—à–∏—Ä–∏—Ç—å `NetworkError` —Å response body (–≤–∞–∂–Ω–æ)
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å query parameters –≤ `SimpleGetRoute` (–≤–∞–∂–Ω–æ)
5. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å "Quick Mode" –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –ø–æ—Ä–æ–≥–∞ –≤—Ö–æ–¥–∞ (–≤–∞–∂–Ω–æ)
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å `Paginator` helper (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)
7. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å exponential backoff (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)

**–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å—Ç–∞–Ω–µ—Ç –æ—Ç–ª–∏—á–Ω–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π Alamofire —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º Swift Concurrency –ø–æ–¥—Ö–æ–¥–æ–º.

### –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è:

**–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:**
- ‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∑–Ω–∞–∫–æ–º—ã—Ö —Å Swift Concurrency
- ‚úÖ –ü—Ä–æ–µ–∫—Ç–æ–≤ —Å –ø—Ä–æ—Å—Ç—ã–º–∏ REST API
- ‚úÖ –¢–µ—Ö, –∫—Ç–æ —Ü–µ–Ω–∏—Ç type safety –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–¥
- ‚úÖ –ü—Ä–æ–µ–∫—Ç–æ–≤ —Å OAuth/Bearer token –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

**–ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è (–ø–æ–∫–∞):**
- ‚ùå –ù–∞—á–∏–Ω–∞—é—â–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- ‚ùå –ü—Ä–æ–µ–∫—Ç–æ–≤ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∞–π–ª–æ–≤
- ‚ùå –ü—Ä–æ–µ–∫—Ç–æ–≤ —Å–æ —Å–ª–æ–∂–Ω—ã–º–∏ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏
- ‚ùå Legacy –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ iOS < 17

---

## üìà –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

### Roadmap –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è "99%"

#### Phase 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∏—á–∏ (2-3 –Ω–µ–¥–µ–ª–∏)
1. –î–æ–±–∞–≤–∏—Ç—å `EncodableRoute` –∏ –ø—Ä–æ—Å—Ç—ã–µ generic routes
2. –î–æ–±–∞–≤–∏—Ç—å `MultipartRoute` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
3. –†–∞—Å—à–∏—Ä–∏—Ç—å `NetworkError` —Å response data
4. –£–ª—É—á—à–∏—Ç—å `SimpleRoutes` —Å query parameters

#### Phase 2: –£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)
5. –î–æ–±–∞–≤–∏—Ç—å "Quick Mode" API
6. –î–æ–±–∞–≤–∏—Ç—å `Paginator` helper
7. –£–ª—É—á—à–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
8. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

#### Phase 3: Advanced features (2-3 –Ω–µ–¥–µ–ª–∏)
9. Exponential backoff retry policy
10. Request cancellation
11. Response validators
12. Certificate pinning
13. Request mocking –¥–ª—è —Ç–µ—Å—Ç–æ–≤

#### Phase 4: –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ (ongoing)
14. –ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ —Ä–µ–∞–ª—å–Ω—ã—Ö use cases
15. Migration guides –æ—Ç Alamofire/Moya
16. Performance benchmarks
17. SwiftUI integration examples
18. Combine integration (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ "99%": **4-6 –Ω–µ–¥–µ–ª—å**

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Phase 1-2 –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ production –ø—Ä–æ–µ–∫—Ç–æ–≤.

---

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 7.5/10 - –æ—Ç–ª–∏—á–Ω–∞—è –æ—Å–Ω–æ–≤–∞ —Å –ø—Ä–æ–¥—É–º–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, –Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª:** 9/10 - –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —Ñ–∏—á –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –ª—É—á—à–µ–π Swift networking –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π.
