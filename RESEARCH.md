## Перевод анализа

### Критические проблемы

1. **Маршруты с Encodable-тилами тихо “проглатывают” ошибки кодирования тела запроса.**
   В обоих `bodyData` используется `try?`, поэтому при ошибке кодирования возвращается `nil`, и создание запроса продолжается так, будто всё отлично. В итоге сервер получает пустое тело, а вызывающая сторона не получает сигнал о проблеме — ошибка `.bodyEncodingFailed` не возникает. Для сложных payload-ов это приводит к «потерянным» данным и трудным для отладки багам. Ошибки кодирования должны пробрасываться наружу.
   Источник: `Sources/Nevod/Protocols/EncodableRoute.swift`.

2. **Route-builder считает пустое тело запроса фатальной ошибкой.**
   В `Route.makeRequest` любое тело `Data()` трактуется как `.bodyEncodingFailed`. Но есть множество эндпоинтов, где пустое тело — это норма (например: `POST /logout`). Сейчас невозможно намеренно отправить пустое тело.
   Источник: `Sources/Nevod/Protocols/Route.swift`.

3. **Конфигурация JSON-кодировщика на уровне маршрута игнорируется.**
   `EncodableRoute` предоставляет `bodyEncoder`, но внутри `makeRequest` всегда используется `config.jsonEncoder`. В итоге любой кастомный энкодер маршрута (формат дат, стратегия ключей и т. п.) вообще не задействуется.
   Источники: `EncodableRoute.swift`, `Route.swift`.

4. **RateLimiter использует системное («настенное») время.**
   В `RateLimiter` применяется `Date()` для измерения интервалов. Любые изменения времени на устройстве — перевод часов пользователем, синхронизация NTP, переход на летнее — приводят к скачкам интервалов, из-за чего лимитер может либо «замёрзнуть», либо внезапно пропустить лишние запросы. Решение: использовать монотонные часы (`ContinuousClock`, `DispatchTime`).
   Источник: `Sources/Nevod/Core/RateLimiter.swift`.

5. **На Linux `URLSession` с delegate теряет пользовательскую конфигурацию.**
   При передаче delegate метод `requestData` создаёт новый экземпляр `URLSession` с той же конфигурацией, но *без всех пользовательских настроек* исходной сессии (кеш, protocol classes, cookie storage и т. д.). Эти настройки отбрасываются, и поведение запросов с delegate и без него становится различным.
   Источник: `Sources/Nevod/Protocols/URLSessionProtocol.swift`.
